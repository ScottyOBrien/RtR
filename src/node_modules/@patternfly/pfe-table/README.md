# PatternFly Element | Table element

## Import component

As regards the component, the javascript file `pfe-table.umd.js` needs to be imported.
The component has a lightdom css file, external to the webcomponent, that **has** to be imported in the pages where you want to use it. The name of the minified version of the file `pfe-table--lightdom.min.css`, the non-minified is `pfe-table--lightdom.css`.

### Internet Explorer compatibility

To ensure IE compatibility, add the `pfe-table--lightdom--ponyfill.js` file *before* the `pfe-theme-ponyfill.js` file. See the styleguide for IE for more info.

## Usage

From version 2.1.2, you can also set any property of agGrid directly on the element, either as attribute or as property of the custom element.<br>
You can find the list of properties in ag grid docs.

**Note**: setting directly the value of a property will **always** have precedence on `gridOptions[propertyName]`.

### Using attributes
In this example, columnDefs is set using a normal JSON with single quotes for the attributes. This is **not** valid html, even if works on modern browsers.

rowData is set using a JSON with escaped double quotes. This is **valid** html.

```html
<pfe-table
  column-defs='[{"headerName":"Make","field":"make","sortable":true},{"headerName":"Model","field":"model","sortable":true},{"headerName":"Price","field":"price","sortable":true}]'
  row-data="[{&quot;make&quot;:&quot;Toyota&quot;,&quot;model&quot;:&quot;Celica&quot;,&quot;price&quot;:35000},{&quot;make&quot;:&quot;Ford&quot;,&quot;model&quot;:&quot;Mondeo&quot;,&quot;price&quot;:32000},{&quot;make&quot;:&quot;Toyota&quot;,&quot;model&quot;:&quot;Celica&quot;,&quot;price&quot;:35000},{&quot;make&quot;:&quot;Ford&quot;,&quot;model&quot;:&quot;Mondeo&quot;,&quot;price&quot;:32000},{&quot;make&quot;:&quot;Toyota&quot;,&quot;model&quot;:&quot;Celica&quot;,&quot;price&quot;:35000}]"
> 
</pfe-table>
```

### Using properties

```html
<pfe-table id="table-1"></pfe-table>
<script>
  customElements.whenDefined("pfe-table").then(function() {
    const table1 = document.querySelector("#table-1");
    table1.columnDefs = [{"headerName":"Make","field":"make","sortable":true},{"headerName":"Model","field":"model","sortable":true},{"headerName":"Price","field":"price","sortable":true}];
    table1.rowData = [{"make":"Toyota","model":"Celica","price":35000},{"make":"Ford","model":"Mondeo","price":32000},{"make":"Toyota","model":"Celica","price":35000},{"make":"Ford","model":"Mondeo","price":32000},{"make":"Toyota","model":"Celica","price":35000},{"make":"Ford","model":"Mondeo","price":32000},{"make":"Toyota","model":"Celica","price":35000},{"make":"Ford","model":"Mondeo","price":32000},{"make":"Toyota","model":"Celica","price":35000},{"make":"Ford","model":"Mondeo","price":32000},{"make":"Porsche","model":"Boxter","price":72000}];
  })
</script>
```

### In angular template


```html
<pfe-table
[columnDefs]="[{'headerName':'Make','field':'make','sortable':true},{'headerName':'Model','field':'model','sortable':true},{'headerName':'Price','field':'price','sortable':true}]"
[rowData]="[{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Porsche','model':'Boxter','price':72000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Toyota','model':'Celica','price':35000},{'make':'Ford','model':'Mondeo','price':32000},{'make':'Porsche','model':'Boxter','price':72000}]"
></pfe-table>
```

Obviously, you can and should use variables set in your angular component, instead of the values directly in the template as in this example.

```html
<pfe-table
[columnDefs]="myColumnDefs"
[rowData]="myRowData"
></pfe-table>
```

### API

You can get [agGrid API](https://www.ag-grid.com/javascript-grid-api/) as the property `api` of the table.
You can also get [agGrid column API](https://www.ag-grid.com/javascript-grid-api/) as the property `columnApi` of the table

```js
customElements.whenDefined("pfe-table").then(function() {
  const table1 = document.querySelector("pfe-table");
  const api1 = table1.api;
  const columnApi1 = table1.columnApi;
}
```


## Older Usage

The first thing you need to do in order to use this component is to define the basic configuration of the grid.

### **Define the columns**

```js
const columnDefs = [
  {
    headerName: "Name",
    field: "name"
  },
  {
    headerName: "Country",
    field: "country",
    cellRenderer: countryCellRenderer // ---> See below
  },
  {
    headerName: "Proficiency",
    field: "proficiency",
    cellRenderer: percentCellRenderer // ---> See below
  },
  {
    headerName: "Mobile",
    field: "mobile"
  },
  {
    headerName: "Land-line",
    field: "landline",
    filter: "text"
  },
  {
    headerName: "Address",
    field: "address"
  }
];
```

<br>

#### **Cell render**
If you want to render additional information in to the cell, you can define the cellRenderer, a render function that will be used in order to display the content of it.

```js
  // In the column definition
  const columnDefs = [
  ...
  ...
  {
    headerName: "Country",
    field: "country",
    cellRenderer: countryCellRenderer
  },
  ...
  ]

  function countryCellRenderer(params) {
    const flag =
      '<img\
      border="0"\
      width="15"\
      height="10"\
      style="margin-bottom: 2px"\
      src="http://flags.fmcdn.net/data/flags/mini/' + COUNTRY_CODES[params.value] + '.png">';

    return flag + " " + params.value;
  }
```

### **Define the data**

Next you should specify which data should be used by the grid.
Here's a static example:

```js
const data = [
  {
    name: "Sophie Beckham",
    skills: {
      android: false,
      html5: false,
      mac: false,
      windows: false,
      css: false
    },
    address:
      "1197 Thunder Wagon Common, Cataract, RI, 02987-1016, US, (401) 747-0763",
    years: 45,
    proficiency: 93,
    country: "Ireland",
    continent: "Europe",
    language: "English",
    mobile: "+577 1083 865 329",
    landline: "+527 556 837 641"
  },
  {
    name: "Isabelle Black",
    skills: {
      android: false,
      html5: false,
      mac: true,
      windows: true,
      css: false
    },
    address: "3685 Rocky Glade, Showtucket, NU, X1E-9I0, CA, (867) 371-4215",
    years: 67,
    proficiency: 49,
    country: "Spain",
    continent: "Europe",
    language: "Spanish",
    mobile: "+124 994 644 407",
    landline: "+378 7710 551 987"
  },
  {
    name: "Emily Braxton",
    skills: {
      android: true,
      html5: true,
      mac: false,
      windows: true,
      css: true
    },
    address:
      "3235 High Forest, Glen Campbell, MS, 39035-6845, US, (601) 638-8186",
    years: 21,
    proficiency: 39,
    country: "United Kingdom",
    continent: "Europe",
    language: "English",
    mobile: "+543 193 624 386",
    landline: "+291 548 931 613"
  },
  {
    name: "Olivia Brennan",
    skills: {
      android: false,
      html5: false,
      mac: false,
      windows: false,
      css: true
    },
    address:
      "2234 Sleepy Pony Mall , Drain, DC, 20078-4243, US, (202) 948-3634",
    years: 86,
    proficiency: 71,
    country: "France",
    continent: "Europe",
    language: "French",
    mobile: "+742 844 748 906",
    landline: "+897 460 361 873"
  },
  {
    name: "Lily Brock",
    skills: {
      android: false,
      html5: false,
      mac: true,
      windows: false,
      css: true
    },
    address:
      "2722 Hazy Turnabout, Burnt Cabins, NY, 14120-5642, US, (917) 604-6597",
    years: 85,
    proficiency: 50,
    country: "Germany",
    continent: "Europe",
    language: "(other)",
    mobile: "+625 979 514 992",
    landline: "+170 426 238 735"
  },
  {
    name: "Chloe Bryson",
    skills: {
      android: true,
      html5: true,
      mac: true,
      windows: true,
      css: false
    },
    address: "6686 Lazy Ledge, Two Rock, CA, 92639-3020, US, (619) 901-9911",
    years: 81,
    proficiency: 96,
    country: "Sweden",
    continent: "Europe",
    language: "(other)",
    mobile: "+884 814 995 212",
    landline: "+539 487 781 619"
  },
  {
    name: "Isabella Cadwell",
    skills: {
      android: true,
      html5: false,
      mac: false,
      windows: true,
      css: false
    },
    address: "2000 Dewy Limits, Wacahoota, NF, A4L-2V9, CA, (709) 065-3959",
    years: 45,
    proficiency: 99,
    country: "Norway",
    continent: "Europe",
    language: "(other)",
    mobile: "+934 317 594 989",
    landline: "+668 642 882 457"
  },
  {
    name: "Amelia Cage",
    skills: {
      android: true,
      html5: false,
      mac: true,
      windows: false,
      css: false
    },
    address:
      "7710 Noble Pond Avenue, Bolivia, RI, 02931-1842, US, (401) 865-2160",
    years: 72,
    proficiency: 9,
    country: "Italy",
    continent: "Europe",
    language: "(other)",
    mobile: "+261 374 1910 519",
    landline: "+439 830 267 665"
  },
  {
    name: "Jessica Carson",
    skills: {
      android: false,
      html5: false,
      mac: false,
      windows: true,
      css: false
    },
    address: "3452 Sunny Vale, Pyro, ON, M8V-4Z0, CA, (519) 072-8609",
    years: 15,
    proficiency: 18,
    country: "Greece",
    continent: "Europe",
    language: "(other)",
    mobile: "+929 542 292 4103",
    landline: "+553 832 8101 242"
  },
  {
    name: "Sophia Chandler",
    skills: {
      android: false,
      html5: false,
      mac: false,
      windows: true,
      css: true
    },
    address: "4402 Dusty Cove, Many Farms, UT, 84853-8223, US, (435) 518-0673",
    years: 43,
    proficiency: 74,
    country: "Iceland",
    continent: "Europe",
    language: "(other)",
    mobile: "+446 423 2210 2108",
    landline: "+1027 176 714 587"
  }
];
```

###**Create and inject the gridOptions to the component**

Now that you have your columns and your data defined, create an object like this:

```js
const gridOptions = {
  columnDefs: columnDefs,
  rowData: data
};
```

And once DOM and the scripts are loaded, just pass this object to the element itself:

```js
const myGrid = document.querySelector("#myGrid");
myGrid.gridOptions = gridOptions;
```

```html
<pfe-table id="myGrid"></pfe-table>
```

### Server side pagination

If you'd like to pass to the grid only a portion of the total data, and display a pagination, just place the `pfe-table-pagination` component inside the table.

```js
<pfe-table id="myGrid" style="height: 350px; width: 800px;">
  <pfe-table-pagination
    total="10"
    per-page="2"
    active-page="1"
    change-callback={this.handlePaginationChange}
  />
</pfe-table>
```

For the documentation of the `pfe-table-pagination` component check its README.md or storybook.

## Styling

For Internet Explorer compatibility, all css variables for the table have been defined in the :root of the document. This means that they cannot have different values for different pfe-table elements on browsers that do not support css variables natively (such as Internet Explorer).

### Adding custom style

If you want to add style for custom html structures of a table (e.g. a custom cell with a custom cell renderer), you should use the methods `addStyle(cssString)` and `removeAddedStyle()`.
Otherwise, you can also use the property `extraStyle`.
**Note:** Other methods would work at the moment, as the table does not have a shadowDOM. This could change in the future if the shadowDOM is added and the table DOM is incapsulated.

Example 1:

```js
document.querySelector("pfe-table").addStyle(".cell-class-name {background-color: purple}");
```

Example 2:

```js
document.querySelector("pfe-table").extraStyle += ".cell-class-name {background-color: purple}";
```

### Cell styling

You can add the class `fit-content-to-cell` to the cell to ensure that the content fit the cell size in height and width.
To add the class to the cell, use ag grid property `cellClass`.


## Attributes

In addiction to the attributes relative to ag-grid, these are the custom attributes:

**`row-border`**
Set to `none` to remove row borders.

**Other attributes:**
For all the properties and attributes available check the ag-grid Grid Properties Doc:
<br>
https://www.ag-grid.com/javascript-grid-properties/

## Events

For all events available check the ag-grid Grid Events Docs:
<br>
https://www.ag-grid.com/javascript-grid-events/

## Dependencies

The only external dependency is ag-grid, a library for creating and managing simple and rich grids.
https://www.ag-grid.com/

## Dev

    `npm start`

## Test

    `npm run test`

## Build

    `npm run build`

## Demo

From the PFElements root directory, run:

    `npm run demo`

## Code style

Table (and all PFElements) use [Prettier][prettier] to auto-format JS and JSON. The style rules get applied when you commit a change. If you choose to, you can [integrate your editor][prettier-ed] with Prettier to have the style rules applied on every save.

[prettier]: https://github.com/prettier/prettier/
[prettier-ed]: https://prettier.io/docs/en/editors.html
[web-component-tester]: https://github.com/Polymer/web-component-tester

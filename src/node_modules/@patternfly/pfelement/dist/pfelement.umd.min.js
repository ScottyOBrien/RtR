!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.PFElement=e()}(this,function(){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t,e){if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),n=r.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=e,o=0;o<n;){var a=r[o];if(t.call(i,a,o,r))return a;o++}}}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)});var n=function(){return null};function i(){n("[reveal] web components ready"),n("[reveal] elements ready, revealing the body"),window.document.body.removeAttribute("unresolved")}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t};function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};var a={object:{prop:{setter:function(t,e,r){var n=this[t];this[t]=e,r&&r(this,n,e)},getter:function(t){return this[t]},define:function(t,e,r){var n=this;this[e=e||"_"+t]={},Object.defineProperty(this,t,{set:function(t){a.object.prop.setter.bind(n)(e,t,r)},get:function(){return a.object.prop.getter.bind(n)(e)},enumerable:!0})}},attr:{parse:function(t){return JSON.parse(t)},onChange:function(t,e,r,n){this[t]=a.object.attr.parse.bind(this)(n)}}},alias:{prop:{setter:function(t,e){this[t]=e},getter:function(t){return this[t]},define:function(t,e){var r=this;Object.defineProperty(this,t,{set:function(t){return a.alias.prop.setter.bind(r)(e,t)},get:function(){return a.alias.prop.getter.bind(r)(e)},enumerable:!0})}}},boolean:{prop:{setter:function(t,e){e?this.setAttribute(t,""):this.removeAttribute(t)},getter:function(t){return this.hasAttribute(t)&&"false"!==this.getAttribute(t)},define:function(t,e){var r=this;Object.defineProperty(this,t,{set:function(t){return a.boolean.prop.setter.bind(r)(e,t)},get:function(){return a.boolean.prop.getter.bind(r)(e)},enumerable:!0})}},attr:{onChange:function(t,e,r){r&&a.boolean.attr.hasChanged(t,e)&&r(this,t,e)},hasChanged:function(t,e){return(null==t||"false"===t)!=(null==e||"false"===e)}}},string:{prop:{setter:function(t,e){null!=e?this.setAttribute(t,e):this.removeAttribute(t)},getter:function(t){return this.hasAttribute(t)?this.getAttribute(t):null},define:function(t,e){var r=this;Object.defineProperty(this,t,{set:function(t){return a.string.prop.setter.bind(r)(e,t)},get:function(){return a.string.prop.getter.bind(r)(e)},enumerable:!0})}}},function:{prop:{setter:function(t,e,r){var n=this[t];this[t]=e,r&&r(this,n,e)},getter:function(t){return this[t]},define:function(t,e,r){var n=this;this[e=e||"_"+t]={},Object.defineProperty(this,t,{set:function(t){a.function.prop.setter.bind(n)(e,t,r)},get:function(){return a.function.prop.getter.bind(n)(e)},enumerable:!0})}},attr:{parse:function(){try{return"string"==typeof fn?new Function("return "+fn)():"function"==typeof fn?fn:new Function}catch(t){return null}},onChange:function(t,e,r,n){this[t]=a.function.attr.parse.bind(this)(n)}}},number:{prop:{setter:function(t,e){null==e||isNaN(e)?this.removeAttribute(t):this.setAttribute(t,e)}}}},r=(t(s,[{key:"instanceConstructorLogic",value:function(t){this.propName&&this.defineProp(t)}},{key:"getDefineFn",value:function(t){return a[this.type].prop.define.bind(t)}},{key:"defineProp",value:function(t){this.getDefineFn(t)(this.propName)}},{key:"onAttributeChangedLogic",value:function(t,e,r){this.onChangeCallback(t,e,r)}},{key:"attrIsObserved",get:function(){return this.attrName&&this.onChangeCallback}}]),s);function s(t,e,r,n){if(l(this,s),this.type=t,this.attrName=e,this.propName=r,this.onChangeCallback=n,!e&&!r)throw new Error("attribute name and property name are not defined. You need to define at least one")}var u=(e(f,r),t(f,[{key:"defineProp",value:function(t){this.getDefineFn(t)(this.propName,this.privatePropName,this.onChangeCallback)}},{key:"onAttributeChangedLogic",value:function(t,e,r){this.propName&&a.object.onChange.bind(t)(this.propName,this.attrName,e,r)}},{key:"attrIsObserved",get:function(){return!!this.attrName}}]),f);function f(t,e,r,n){l(this,f);var i=h(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,"object",t,e,r));return i.propName&&(i.privatePropName=n||"_"+i.propName),i}var d=(e(b,r),t(b,[{key:"defineProp",value:function(r){var n=this;this.attrName?this.getDefineFn(r)(this.propName,this.attrName):Object.defineProperty(r,this.propName,{set:function(t){var e=r[n.privatePropName];r[n.privatePropName]=t,n.onChangeCallback&&n.onChangeCallback(r,e,t)},get:function(){return r[n.privatePropName]},enumerable:!0})}}]),b);function b(t,e,r,n){l(this,b);var i=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"string",t,e,r));return i.attrName||(i.privatePropName=n||"_"+i.propName),i}var m=(e(g,r),t(g,[{key:"defineProp",value:function(e){var r=this;this.aliasedPropName?this.getDefineFn(e)(this.propName,this.aliasedPropName):this.aliasedAttrName&&Object.defineProperty(e,this.propName,{set:function(t){e.setAttribute(r.aliasedAttrName,t)},get:function(){return e.hasAttribute(r.aliasedAttrName)&&e.getAttribute(r.aliasedAttrName)},enumerable:!0})}},{key:"onAttributeChangedLogic",value:function(t,e,r){this.aliasedAttrName?t.setAttribute(this.aliasedAttrName,r):this.aliasedPropName&&(t[this.aliasedPropName]=r)}},{key:"attrIsObserved",get:function(){return!!this.attrName}}]),g);function g(t,e,r,n){l(this,g);var i=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,"alias",t,e,void 0));if(i.aliasedPropName=r,!(i.aliasedAttrName=n)&&!n)throw new Error("Aliased property has no aliasedPropName and aliasedAttrName");return i}var v=(e(y,r),t(y,[{key:"defineProp",value:function(r){var n=this;this.attrName?this.getDefineFn(r)(this.propName,this.attrName):Object.defineProperty(r,this.propName,{set:function(t){var e=r[n.privatePropName];r[n.privatePropName]=!!t,n.onChangeCallback&&n.onChangeCallback(r,e,t)},get:function(){return r[n.privatePropName]},enumerable:!0})}}]),y);function y(t,e,r,n){l(this,y);var i=h(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,"boolean",t,e,r));return t||(i.privatePropName=n||"_"+e),i}var A=(e(N,r),t(N,[{key:"defineProp",value:function(t){this.getDefineFn(t)(this.propName,this.privatePropName,this.onChangeCallback)}},{key:"onAttributeChangedLogic",value:function(t,e,r){a.object.onChange.bind(t)(this.propName,this.attrName,e,r)}},{key:"attrIsObserved",get:function(){return!!this.attrName}}]),N);function N(t,e,r,n){l(this,N);var i=h(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,"function",t,e,r));if(!e||"string"!=typeof e)throw new Error("propName must be a non-empty string for functions");return i.privatePropName=n||"_"+e,i}var _=(e(w,r),t(w,[{key:"parse",value:function(t){return Number(t)}},{key:"defineProp",value:function(e){var r=this;if(this.privatePropName&&this.attrName)throw new Error("Not implemented yet for "+this.type+" prop and attribute");this.attrName?Object.defineProperty(e,this.propName,{set:function(t){a.number.prop.setter.bind(e)(r.attrName,t)},get:function(){if(e.hasAttribute(r.attrName))return r.parse(e.getAttribute(r.attrName))},enumerable:!0}):Object.defineProperty(e,this.propName,{set:function(t){e[r.privatePropName],e[r.privatePropName]=t},get:function(){return e[r.privatePropName]},enumerable:!0})}},{key:"onAttributeChangedLogic",value:function(t,e,r){if(this.privatePropName&&this.attrName)throw new Error("Not implemented yet for "+this.type+" prop and attribute");var n=this.parse(e),i=this.parse(r);this.onChangeCallback(t,n,i)}},{key:"attrIsObserved",get:function(){return function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"attrIsObserved",this)||this.privatePropName&&this.attrName}}]),w);function w(t,e,r,n,i){l(this,w);var o=h(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,t,e,r,n));return e&&!i||(o.privatePropName=i||"_"+r),o}var k=(e(C,_),t(C,[{key:"parse",value:function(t){return parseInt(t)}}]),C);function C(t,e,r){return l(this,C),h(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,"integer",t,e,r))}var P=(e(O,_),t(O,[{key:"parse",value:function(t){return parseFloat(t)}}]),O);function O(t,e,r){return l(this,O),h(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,"float",t,e,r))}var j=new Error("The wrapped element is not yet obtainable. The property must be set in a different way, or after the wrapped element is obtainable"),S=(e(E,r),t(E,[{key:"updateAttrFromWrappedAttribute",value:function(t){var e=this.getWrappedElementFn(t);if(!e)throw j;e.hasAttribute(this.wrappedAttrName)?t.setAttribute(this.attrName,e.getAttribute(this.wrappedAttrName)):t.removeAttribute(this.attrName)}},{key:"updateWrappedAttribute",value:function(t,e){var r=this.getWrappedElementFn(t);if(!r)throw j;null!=e?r.setAttribute(this.wrappedAttrName,e):r.removeAttribute(this.wrappedAttrName)}},{key:"defineProp",value:function(n){var i=this,t={enumerable:!0};this.wrappedPropName?(t.set=function(t){var e=i.getWrappedElementFn(n);if(!e)throw j;var r=n[i.propName];e[i.wrappedPropName]=t,i.wrappedAttrName&&i.attrName?i.updateAttrFromWrappedAttribute(n):i.onChangeCallback&&i.onChangeCallback(n,r,n[i.propName])},t.get=function(){var t=i.getWrappedElementFn(n);if(t)return t[i.wrappedPropName];throw j}):(t.set=function(t){if(!i.getWrappedElementFn(n))throw j;var e=n[i.propName];i.updateWrappedAttribute(n,t),i.attrName?i.updateAttrFromWrappedAttribute(n):i.onChangeCallback&&i.onChangeCallback(n,e,n[i.propName])},t.get=function(){var t=i.getWrappedElementFn(n);if(!t)throw j;if(t.hasAttribute(i.wrappedAttrName))return t.getAttribute(i.wrappedAttrName)}),Object.defineProperty(n,this.propName,t)}},{key:"onAttributeChangedLogic",value:function(t,e,r){if(!this.getWrappedElementFn(t))throw j;e!==r&&(this.wrappedAttrName?(this.updateWrappedAttribute(t,r),this.updateAttrFromWrappedAttribute(t)):this.propName&&(t[this.propName]=r),this.onChangeCallback&&this.onChangeCallback(t,e,r))}},{key:"attrIsObserved",get:function(){return!!this.attrName}}]),E);function E(t,e,r,n,i,o){l(this,E);var a=h(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,"wrapped",t,e,r));if("function"!=typeof n)throw new Error("getWrappedElementFn must be a function that returns an html element for wrapped prop and attr type");if(!i&&!o)throw new Error("one of wrappedAttrName and wrappedPropName must be defined, for wrapped prop and attr type");return a.getWrappedElementFn=n,a.wrappedAttrName=i,a.wrappedPropName=o,a}var T,F="pfe-",L=(T=HTMLElement,e(x,T),t(x,[{key:"propsAndAttrsConstructorLogic",value:function(){var e=this;this._pfeClass.propsAndAttrs.forEach(function(t){return t.instanceConstructorLogic(e)})}},{key:"propsAndAttrsOnAttributeChangedLogic",value:function(e,t,r){var n=this._pfeClass.propsAndAttrs.filter(function(t){return t.attrName===e});if(n.length){if(1<n.length)throw new Error("more than one attribute with the same name has been defined in propAndAttr api");n[0].onAttributeChangedLogic(this,t,r)}}},{key:"cssVariable",value:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:this;return t="--"!==t.substr(0,2)?"--"+t:t,e&&n.style.setProperty(t,e),window.getComputedStyle(n).getPropertyValue(t).trim()}},{key:"has_slot",value:function(t){return this.querySelector("[slot='"+t+"']")}},{key:"has_slots",value:function(t){return[].concat(c(this.querySelectorAll("[slot='"+t+"']")))}},{key:"context_update",value:function(){var t=this.querySelectorAll("[pfelement]"),e=this.cssVariable("theme");this.hasAttribute("pfe-theme")&&(e=this.getAttribute("pfe-theme"),this.cssVariable("theme",e)),this.context_set(e),[].concat(c(t)).map(function(t){t.connected&&t.context_set(e)})}},{key:"context_set",value:function(t){var e=this.cssVariable("theme");!(e=e||this.getAttribute("pfe-theme"))&&t&&(e=t),e&&this.setAttribute("on",e)}},{key:"randomId",get:function(){return Math.random().toString(36).substr(2,9)}},{key:"version",get:function(){return this._pfeClass.version}},{key:"pfeType",get:function(){return this.getAttribute(F+"type")},set:function(t){this.setAttribute(F+"type",t)}}],[{key:"create",value:function(t){window.customElements.define(t.tag,t)}},{key:"debugLog",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;return null!==e&&(x._debugLog=!!e),x._debugLog}},{key:"log",value:function(){var t;x.debugLog()&&(t=console).log.apply(t,arguments)}},{key:"propsAndAttrs",get:function(){return[]}},{key:"propsAndAttrsAPI",get:function(){return{alias:m,boolean:v,float:P,function:A,integer:k,number:_,object:u,string:d,wrapped:S}}},{key:"propAndAttrsObservedAttributes",get:function(){return this.propsAndAttrs.filter(function(t){return t.attrIsObserved}).map(function(t){return t.attrName})}},{key:"PfeTypes",get:function(){return{Container:"container",Content:"content",Combo:"combo"}}},{key:"version",get:function(){return"{{version}}"}},{key:"observedAttributes",get:function(){return["pfe-theme"].concat(c(this.propAndAttrsObservedAttributes))}}]),t(x,[{key:"connectedCallback",value:function(){var e=this;if("pfe-navigation"===this.tag||"pfe-navigation-main"===this.tag||"pfe-navigation-item"===this.tag||"pfe-card"===this.tag)return new Promise(function(t){setTimeout(function(){return e.children.length?(e.render(),e._connectedCallback(),t()):void e._observer.observe(e,{childList:!0})},0)});this._connectedCallback()}},{key:"_connectedCallback",value:function(){this.connected=!0,this.log("Connecting..."),"pfe-table"!==this.tag&&window.ShadyCSS&&(this.log("Styling..."),window.ShadyCSS.styleElement(this),this.log("Styled.")),!this.hasAttribute("pfelement")&&this.hasAttribute("on")&&console.warn(this.tag+(this.id?"[#"+this.id+"]":"")+': The "on" attribute is protected and should not be manually added to a component. The base class will manage this value for you on upgrade.'),this.classList.add("PFElement"),this.setAttribute("pfelement",""),"object"===p(this.props)&&(this._mapSchemaToProperties(this.tag,this.props),this.log("Properties attached.")),"object"===p(this.slots)&&(this._mapSchemaToSlots(this.tag,this.slots),this.log("Slots attached.")),this._queue.length&&this._processQueue(),this.context_update(),this.log("Connected.")}},{key:"temporaryFixIE11EdgeSlotted",value:function(){var t,e,r=""+this.tag,n=document.head.querySelector("[scope^="+r+"]");!n||(t=Array.from(document.styleSheets).find(function(t){return t.ownerNode&&-1!==t.ownerNode.getAttribute("scope").indexOf(r)?t:null}))&&(e="",Array.from(t.cssRules||t.rules||[]).forEach(function(t){t.selectorText&&"string"==typeof t.cssText&&-1<t.selectorText.indexOf("slot")?e+=" "+t.cssText.replace(/>/gi,""):t&&"string"==typeof t.cssText&&(e+=" "+t.cssText)}),e&&(n.innerText=e))}},{key:"disconnectedCallback",value:function(){this._observer.disconnect(),this.log("Disconnecting..."),this.connected=!1,this.log("Disconnected.")}},{key:"attributeChangedCallback",value:function(t,e,r){var n;this._pfeClass.cascadingAttributes&&((n=this._pfeClass.cascadingAttributes[t])&&this._copyAttribute(t,n),"pfe-theme"===t&&this.context_update()),this.propsAndAttrsOnAttributeChangedLogic(t,e,r)}},{key:"_copyAttribute",value:function(t,e){var r=[].concat(c(this.querySelectorAll(e)),c(this.shadowRoot.querySelectorAll(e))),n=this.getAttribute(t),i=null==n?"removeAttribute":"setAttribute",o=!0,a=!1,s=void 0;try{for(var u,p=r[Symbol.iterator]();!(o=(u=p.next()).done);o=!0)u.value[i](t,n)}catch(t){a=!0,s=t}finally{try{!o&&p.return&&p.return()}finally{if(a)throw s}}}},{key:"_mapSchemaToProperties",value:function(a,s){var u=this;this.log("Mapping properties..."),Object.keys(s).forEach(function(t){var e,r,n,i,o=s[t];"object"===(void 0===o?"undefined":p(o))&&(e=!0,u[r=t]=o,u[t].value=null,void 0!==u[t].prefixed&&(e=u[t].prefixed),e&&(r=F+t),u.hasAttribute(r)?u[t].value=u.getAttribute(r):o.default&&(n=u._hasDependency(a,o.options),i=!o.options||o.options&&!o.options.dependencies.length,(n||i)&&(u.setAttribute(r,o.default),u[t].value=o.default)))}),this.log("Properties mapped.")}},{key:"_hasDependency",value:function(t,e){for(var r=e?e.dependencies:[],n=!1,i=0;i<r.length;i+=1){var o="slot"===r[i].type&&0<this.has_slots(t+"--"+r[i].id).length,a="attribute"===r[i].type&&this.getAttribute(F+r[i].id);if(o||a){n=!0;break}}return n}},{key:"_mapSchemaToSlots",value:function(i,o){var a=this;this.log("Validate slots..."),Object.keys(o).forEach(function(t){var e,r,n=o[t];"object"===(void 0===n?"undefined":p(n))&&(e=!1,r=[],n.namedSlot?(0<(r=a.has_slots(i+"--"+t)).length&&(n.nodes=r,e=!0),0<(r=a.has_slots(""+t)).length&&(n.nodes=r,e=!0)):0<(r=[].concat(c(a.children)).filter(function(t){return!t.hasAttribute("slot")})).length&&(n.nodes=r,e=!0),e?a.setAttribute("has_"+t,""):a.removeAttribute("has_"+t))}),this.log("Slots validated.")}},{key:"_queueAction",value:function(t){this._queue.push(t)}},{key:"_processQueue",value:function(){var e=this;this._queue.forEach(function(t){e["_"+t.type](t.data)}),this._queue=[]}},{key:"_setProperty",value:function(t){var e=t.name,r=t.value;this[e]=r}},{key:"var",value:function(t){return x.var(t,this)}},{key:"render",value:function(){this.shadowRoot.innerHTML="",this.template.innerHTML=this.html,window.ShadyCSS&&window.ShadyCSS.prepareTemplate(this.template,this.tag),this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}},{key:"log",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];x.log.apply(x,["["+this.tag+"]"].concat(e))}},{key:"emitEvent",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=r.bubbles,i=void 0===n||n,o=r.cancelable,a=void 0!==o&&o,s=r.composed,u=void 0!==s&&s,p=r.detail,l=void 0===p?{}:p;this.log("Custom event: "+t),this.dispatchEvent(new CustomEvent(t,{bubbles:i,cancelable:a,composed:u,detail:l}))}},{key:"getUniqueId",value:function(t){for(var e=0<arguments.length&&void 0!==t?t:"id",r=e,n=1;document.getElementById(r);n++)r=e+"-"+n;return r}}],[{key:"var",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:document.body;return window.getComputedStyle(r).getPropertyValue(t).trim()}}]),x);function x(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.type,n=void 0===r?null:r,i=e.delayRender,o=void 0!==i&&i,a=e.customRendering,s=void 0!==a&&a;l(this,x);var u=h(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));return u.connected=!1,u._pfeClass=t,u.tag=t.tag,u.props=t.properties,u.slots=t.slots,u._queue=[],n&&u._queueAction({type:"setProperty",data:{name:"pfeType",value:n}}),u._connectedCallback=u._connectedCallback.bind(u),u._observer=new MutationObserver(u._connectedCallback),s||(u.template=document.createElement("template"),u.log("Constructing..."),"pfe-table"!==u.tag&&u.attachShadow({mode:"open"}),o||"pfe-navigation"===u.tag&&"pfe-navigation-main"===u.tag&&"pfe-navigation-item"===u.tag&&"pfe-card"===u.tag?"pfe-table"!==u.tag&&(u.shadowRoot.innerHTML="<slot></slot>"):o||(u.log("Render..."),u.render(),u.log("Rendered."))),u.propsAndAttrsConstructorLogic(),u}return function(t){n=t;var e=window.WebComponents,r=e&&window.WebComponents.ready;!e||r?i():window.addEventListener("WebComponentsReady",i)}(L.log),L});
//# sourceMappingURL=pfelement.umd.min.js.map
